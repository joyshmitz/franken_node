{
  "summary_id": "chg-20260220-control-lease-gate",
  "contract_version": "1.0",
  "change_summary": {
    "intent": "Add lease guard validation before control-plane finalize.",
    "scope": {
      "subsystems": [
        "franken_node.connector",
        "franken_node.control_plane"
      ],
      "modules": [
        "crates/franken-node/src/connector/lease_coordinator.rs",
        "crates/franken-node/src/connector/lease_service.rs"
      ]
    },
    "surface_area_delta": {
      "new_apis": [
        "POST /v1/fleet/lease/validate"
      ],
      "removed_apis": [],
      "changed_signatures": [
        "fn finalize_lease(...) -> Result<LeaseFinalizeReceipt, LeaseError>"
      ]
    },
    "affected_contracts": {
      "beads": [
        "bd-3se1",
        "bd-c781"
      ],
      "documents": [
        "docs/specs/fastapi_rust_integration_contract.md",
        "docs/specs/frankentui_integration_contract.md"
      ]
    },
    "operational_impact": {
      "operator_notes": "Lease validation now blocks finalize when stale fencing evidence is detected.",
      "required_actions": [
        "Run lease conformance checks before canary promotion.",
        "Update runbook escalation path for lease validation failures."
      ],
      "rollout_notes": "Enable in canary environment first, then expand fleet-wide."
    },
    "risk_delta": {
      "previous_tier": "high",
      "new_tier": "medium",
      "rationale": "Pre-finalize validation removes a class of stale-state lease approvals."
    },
    "compatibility": {
      "backward_compatibility": "compatible",
      "forward_compatibility": "enables",
      "details": "No removed runtime surfaces; this adds stricter validation with explicit failure receipts."
    },
    "dependency_changes": {
      "added": [],
      "removed": [],
      "updated": [
        "tokio: 1.44.0 -> 1.45.0"
      ]
    },
    "compatibility_and_threat_evidence": {
      "compatibility_test_suites": [
        {
          "suite_name": "tests/security/control_epoch_validity.rs",
          "pass_count": 6,
          "fail_count": 0,
          "artifact_path": "artifacts/11/compatibility_threat_evidence_contract.json"
        },
        {
          "suite_name": "tests/integration/frankentui_surface_migration.rs",
          "pass_count": 44,
          "fail_count": 0,
          "artifact_path": "artifacts/10.16/frankentui_surface_inventory.csv"
        }
      ],
      "regression_risk_assessment": {
        "risk_level": "medium",
        "api_families": [
          "POST /v1/fleet/lease/validate",
          "fn finalize_lease(...) -> Result<LeaseFinalizeReceipt, LeaseError>"
        ],
        "notes": "Validation adds stricter controls on existing paths; no endpoint removals."
      },
      "threat_vectors": [
        {
          "vector": "privilege_escalation",
          "mitigation": "Lease finalize now requires current fencing evidence before commit."
        },
        {
          "vector": "data_exfiltration",
          "mitigation": "Validation failures redact sensitive internals in operator-facing receipts."
        },
        {
          "vector": "denial_of_service",
          "mitigation": "Retry bounds and validation caching reduce repeated expensive checks."
        }
      ]
    },
    "rollback_command": {
      "command": "franken-node rollback apply --receipt artifacts/rollback/lease_guard_receipt.json --force-safe",
      "idempotent": true,
      "tested_in_ci": true,
      "test_evidence_artifact": "artifacts/section_11/bd-nglx/rollback_command_ci_test.json",
      "rollback_scope": {
        "reverts": [
          "lease guard validation policy profile",
          "control-plane feature flag for lease finalize checks",
          "compatibility gate override used by lease finalize path"
        ],
        "does_not_revert": [
          "audit events already emitted to evidence ledger",
          "externally consumed workflow events",
          "historical replay bundles exported before rollback"
        ]
      },
      "estimated_duration": "2m30s"
    }
  }
}
